import{_ as f,o as n,c as l,a as c,d as t,F as r,f as p,g,t as o,h as m,v as x}from"./index-4daee2f1.js";const{VITE_APP_API:u,VITE_APP_PATH:h}={VITE_APP_API:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"charizard",BASE_URL:"/week7/",MODE:"production",DEV:!1,PROD:!0},b={data(){return{productId:"",products:[],cart:{},loadingItem:"",infoIsLoading:!1,addToCartIsLoading:!1,deleteItemIsLoading:!1}},methods:{getCart(){this.$http.get(`${u}/v2/api/${h}/cart`).then(e=>{this.cart=e.data.data})},updateCart(e){this.loadingItem=e.id;const i={product_id:e.product.id,qty:e.qty};this.$http.put(`${u}/v2/api/${h}/cart/${e.id}`,{data:i}).then(I=>{this.loadingItem="",this.getCart()})},deleteItem(e){this.loadingItem=e.id,this.deleteItemIsLoading=!0,this.$http.delete(`${u}/v2/api/${h}/cart/${e.id}`).then(i=>{this.loadingItem="",this.getCart(),this.deleteItemIsLoading=!1})},createOrder(){this.cart===""?alert("請加入購買品項!"):(alert("送出成功!"),this.cart="")}},mounted(){this.getCart()}},v={class:"table align-middle"},C=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",{class:"text-end"},"單價")])],-1),P=["onClick","disabled"],y={key:0,class:"fas fa-spinner fa-pulse"},V=t("div",{class:"text-success"}," 已套用優惠券 ",-1),$={class:"input-group input-group-sm"},k={class:"input-group mb-3"},A=["onUpdate:modelValue","onChange","disabled"],E=["value"],L={class:"input-group-text",id:"basic-addon2"},T={class:"text-end"},D=t("small",{class:"text-success"},"折扣價：",-1),q=t("td",{colspan:"3",class:"text-end"},"總計",-1),w={class:"text-end"},B=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),N={class:"text-end text-success"};function O(e,i,I,S,d,_){return n(),l(r,null,[c(" 這是購物車 "),t("table",v,[C,t("tbody",null,[d.cart.carts?(n(!0),l(r,{key:0},p(d.cart.carts,s=>(n(),l("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>_.deleteItem(s),disabled:s.id===d.loadingItem},[this.deleteItemIsLoading?(n(),l("i",y)):g("",!0),c(" x ")],8,P)]),t("td",null,[c(o(s.product.title)+" ",1),V]),t("td",null,[t("div",$,[t("div",k,[m(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":a=>s.qty=a,onChange:a=>_.updateCart(s),disabled:s.id===d.loadingItem},[(n(),l(r,null,p(20,a=>t("option",{value:a,key:`${a}123456`},o(a),9,E)),64))],40,A),[[x,s.qty]]),t("span",L,o(s.product.unit),1)])])]),t("td",T,[D,c(" "+o(s.product.price),1)])]))),128)):g("",!0)]),t("tfoot",null,[t("tr",null,[q,t("td",w,o(d.cart.total),1)]),t("tr",null,[B,t("td",N,o(d.cart.final_total),1)])])])],64)}const F=f(b,[["render",O]]);export{F as default};
